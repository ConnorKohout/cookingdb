{% extends 'base.html' %}

{% block title %}
Edit Recipe - Recipe App
{% endblock %}

{% block content %}
<div class="add-recipe">
    <h2>Edit Recipe</h2>
    <form method="post" enctype="multipart/form-data">
        <!-- Recipe Fields -->
        <div class="form-group">
            <label for="name">Recipe Name</label>
            <input type="text" id="name" name="name" value="{{ recipe[2] }}" required>
        </div>
        <div class="form-group">
            <label for="instructions">Instructions</label>
            <textarea id="instructions" name="instructions" required>{{ recipe[3] }}</textarea>
        </div>
        <div class="form-group">
            <label for="cuisine">Cuisine</label>
            <input type="text" id="cuisine" name="cuisine" value="{{ recipe[4] }}">
        </div>
        <div class="form-group">
            <label for="prep_time">Preparation Time (minutes)</label>
            <input type="number" id="prep_time" name="prep_time" value="{{ recipe[5] }}" required>
        </div>
        <div class="form-group">
            <label for="cook_time">Cooking Time (minutes)</label>
            <input type="number" id="cook_time" name="cook_time" value="{{ recipe[6] }}" required>
        </div>
        <div class="form-group">
            <label for="diet_type">Diet Type</label>
            <input type="text" id="diet_type" name="diet_type" value="{{ recipe[7] }}">
        </div>

        <!-- Existing Photos with Delete Option -->
        {% if images %}
        <div class="form-group">
            <label>Current Photos</label>
            <div class="current-photos">
                {% for image in images %}
                <div class="photo-item">
                    <img src="{{ url_for('uploaded_file', filename=image[2]) }}" class="edit-photo img-fluid rounded" alt="Current Photo">
                    <input type="checkbox" name="delete_images" value="{{ image[0] }}"> Delete this photo
                </div>
                {% endfor %}
            </div>
        </div>
        {% endif %}

        <!-- New Photo Upload -->
        <div class="form-group">
            <label for="new_photos">Add New Photos</label>
            <input type="file" id="new_photos" name="new_photos" multiple>
        </div>

        <!-- Update Button -->
        <button type="submit" class="btn">Update Recipe</button>
    </form>
</div>
{% endblock %}
